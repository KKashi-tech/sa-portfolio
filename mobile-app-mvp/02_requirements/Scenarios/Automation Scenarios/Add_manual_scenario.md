# Сценарий 1: Добавление сценария с ручным запуском

**Когда:** мне нужно использовать сценарий редко или ситуативно, я хочу добавить его с опцией запуска только вручную, чтобы не настраивать автоматизацию там где это не нужно.  

**Примечание:**  
Если время не указано, то сценарий можно будет запустить только вручную — нужно, чтобы пользователь видел уведомление об этом в UI до подтверждения создания сценария  

**Критерии приемки:**  
- Авторизованный пользователь может добавить сценарий автоматизации для ламп с ручным запуском.  
- Если пользователь пытается создать сценарий с существующим названием — отображается ошибка.  
- Если обязательное поле не заполнено — отображается ошибка.  
- Пользователь не может создать новый сценарий, если у него уже есть 10 сценариев.  

**Структура сценария:**  
Авторизованный пользователь может добавить сценарий автоматизации для ламп с ручным запуском.  

**Сценарий 1: Успешное создание сценария**  
- **Дано:** авторизованный пользователь находится в разделе редактирования сценариев в приложении и у пользователя добавлено хотя бы одно устройство  
- **Когда:** пользователь выбирает действие добавления сценария, указывает `<Название сценария>`, добавляет `<устройства>` из списка всех устройств или из определенной `<комнаты>`, определяет `<действие>` для каждого устройства и не указывает время запуска и окончания, подтверждает создание сценария  
- **Тогда:**  
  - Пользователь видит сообщение:  
    ```
    Вы не выбрали время начала и окончания сценария и сможете запускать его только вручную
    ```  
  - Сценарий успешно добавляется в список  
  - Пользователь видит сообщение:  
    ```
    Добавлен новый запускаемый вручную сценарий
    ```  

**Примеры:**  

| Название сценария | Устройство | Комната | Действие |
|------------------|------------|--------|----------|
| Готовлюсь ко сну | Ночник | Не выбрано | Включить |
| Готовлюсь ко сну | Лампа в люстре | Спальня | Выключить |
| Готовлюсь ко сну | Все устройства в комнате | Кухня | Выключить |

**Сценарий 2: Ошибка — сценарий с таким названием уже существует**  
- **Дано:** авторизованный пользователь находится в разделе сценариев и в списке уже есть сценарий с названием `<Название сценария>`  
- **Когда:** пользователь создаёт новый сценарий и вводит то же название, подтверждает создание  
- **Тогда:**  
  - Пользователь видит сообщение:  
    ```
    Сценарий с таким названием уже существует.
    ```  
  - Сценарий не создаётся  

**Сценарий 3: Ошибка — не заполнено обязательное поле**  
- **Дано:** авторизованный пользователь находится на экране добавления сценария  
- **Когда:** пользователь не заполняет одно из обязательных полей `<Название сценария>`, `<устройства>` или `<действие>` и подтверждает создание сценария  
- **Тогда:**  
  - Пользователь видит сообщение:  
    ```
    Заполните обязательные поля.
    ```  
  - Сценарий не создаётся  

**Сценарий 4: Ошибка — превышен лимит количества сценариев**  
- **Дано:** у пользователя уже создано 10 сценариев  
- **Когда:** пользователь выбирает опцию «Добавить сценарий», заполняет все необходимые поля и пытается сохранить новый сценарий  
- **Тогда:**  
  - Пользователь видит сообщение:  
    ```
    Вы не можете добавить больше 10 сценариев. Удалите один из существующих, чтобы добавить новый.
    ```  
  - Сценарий не создаётся
