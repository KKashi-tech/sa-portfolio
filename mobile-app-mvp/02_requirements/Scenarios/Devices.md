# Добавление лампы Stets по QR-коду

**Как пользователь**, я хочу добавлять лампу Stets по QR-коду, чтобы не вводить данные устройства вручную.

### Примечания
- Сценарии управления списком устройств описаны в отдельных историях.
- Устройство всегда привязано к дому.
- В приложении всегда есть хотя бы один дом.
- По умолчанию устройство добавляется в текущий дом.
- Устройство может не быть привязано к комнате.

### Критерии приёмки
- Авторизованный пользователь может добавить лампу Stets по QR-коду.
- Если QR-код недействителен или устройство уже добавлено — отображается ошибка.
- Если устройство уже добавлено — отображается ошибка.
- При попытке добавить неподдерживаемое устройство — отдельная ошибка.

### Сценарий 1: Успешное добавление

**Дано** авторизованный пользователь находится в приложении  
**Когда**
- выбирает «Добавить устройство»
- сканирует корректный QR-код лампы Stets  

**Тогда**
- устройство добавляется в систему  
- система получает `<уникальный код>`, `<название модели>`, `<тип устройства>`  
- пользователь видит сообщение:  
  > Лампа успешно добавлена.  
- лампа отображается в списке устройств дома

---

# Включение и выключение лампы

**Как пользователь**, я хочу включать и выключать лампу Stets в приложении, чтобы управлять светом дистанционно.

### Критерии приёмки
- Авторизованный пользователь может включать и выключать лампу.
- Если лампа недоступна — отображается ошибка.

### Сценарий 1: Управление лампой

**Дано**
- пользователь в приложении  
- в списке есть лампа Stets  

**Когда**
- выбирает `<устройство>`
- выбирает `<действие>`

**Тогда**
- лампа меняет `<статус>`

#### Примеры

| Устройство          | Статус     | Действие  |
|---------------------|------------|-----------|
| LampStetsLP234      | Включено   | Выключить |
| Светильник на столе | Выключено  | Включить  |

---

### Сценарий 2: Лампа недоступна

**Дано**
- пользователь в приложении
- в списке есть лампа

**Когда**
- выбирает `<устройство>`
- выбирает `<действие>`
- устройство недоступно

**Тогда**
- отображается сообщение:  
  > Не удалось изменить состояние лампы. Проверьте соединение с интернетом.
- рядом с лампой отображается иконка недоступности

# Управление всеми лампами в доме

**Как пользователь**, я хочу включать или выключать все лампы в доме одной кнопкой, чтобы быстро управлять освещением во всем доме.

### Критерии приёмки
- Авторизованный пользователь может включить или выключить все лампы в доме одной кнопкой.
- Если одна или несколько ламп недоступны — отображается уведомление.
- Если все лампы недоступны — отображается сообщение об ошибке.

### Сценарий 1: Успешное выполнение

**Дано**
- авторизованный пользователь находится в приложении  
- в доме есть лампы Stets  

**Когда**
- пользователь выбирает кнопку `<действие>` «Все лампы»

**Тогда**
- все лампы переходят в состояние `<ожидаемое состояние>`
- в интерфейсе для каждой лампы отображается состояние `<ожидаемое состояние>`

| Действие | Ожидаемое состояние |
|----------|--------------------|
| Включить | Включено |
| Выключить | Выключено |

---

### Сценарий 2: Часть ламп недоступна

**Дано**
- авторизованный пользователь на главном экране  
- часть ламп недоступна  

**Когда**
- пользователь выбирает `<действие>` «Все лампы»

**Тогда**
- доступные лампы меняют состояние
- пользователь видит сообщение:  
  > Часть ламп недоступна. Проверьте соединение устройств.

---

### Сценарий 3: Все лампы недоступны

**Дано**
- авторизованный пользователь на главном экране  
- все лампы недоступны  

**Когда**
- пользователь выбирает `<действие>` «Все лампы»

**Тогда**
- пользователь видит сообщение:  
  > Все устройства недоступны: проверьте соединение с интернетом.
- состояние ламп не меняется

---
