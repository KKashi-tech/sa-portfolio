## Изменение адреса электронной почты

**User Story**

Когда я теряю доступ к своему почтовому ящику, я хочу менять адрес эл почты, привязанный к моей учетной записи умного дома, чтобы не потерять данные в приложении.

### Примечания
- В следующих релизах сделать подтверждение почты по ссылке в письме

### Критерии приёмки
- Авторизованный пользователь может в приложении изменить адрес электронной почты, указанный при регистрации
- Если пользователь вводит почту некорректно (не написал домен или не поставил @), отображается сообщение об ошибке
- Если новый адрес уже используется другой учётной записью, отображается сообщение об ошибке
- После изменения почты пользователь может входить в приложение с новым адресом

---

### Сценарий 1: Авторизованный пользователь может изменить адрес электронной почты

**Дано** авторизованный пользователь находится в разделе настроек учетной записи  
**Когда** выбирает опцию «Изменить данные учетной записи»  
**И** вводит новый корректный `<адрес почты>`  
**И** подтверждает действие  
**Тогда** система обновляет адрес электронной почты, связанный с учётной записью  
**И** пользователь видит сообщение:

> Адрес электронной почты успешно изменён.

**Примеры**

| адрес почты |
|-------------|
| user.new@mail.ru |
| example.updated@yandex.ru |

---

### Структура сценария 2: Некорректная почта

**Дано** авторизованный пользователь находится в разделе настроек учетной записи  
**Когда** вводит некорректный `<адрес почты>`  
**Тогда** видит сообщение об ошибке:

> Поле заполнено неверно. Допустим только адрес в формате example@domain.ru

---

### Сценарий 3: Почта уже используется

**Дано** авторизованный пользователь находится на экране изменения адреса почты  
**Когда** вводит новый адрес, уже привязанный к другой учётной записи  
**Тогда** система отображает сообщение:

> Пользователь с таким адресом уже зарегистрирован. Укажите другой адрес.

И адрес электронной почты не изменяется

---

### Сценарий 4: Вход с новым адресом

**Дано** пользователь успешно изменил адрес электронной почты  
**Когда** выходит из приложения  
**И** выбирает опцию «Войти»  
**И** корректно вводит новый адрес почты и пароль  
**Тогда** происходит успешная авторизация  
**И** пользователь попадает на главный экран приложения

---
